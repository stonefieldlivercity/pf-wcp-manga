<!--レーダーチャート-->
<% book.ratings.each do |rating| %>
<canvas id="myRadarChart_<%=rating.id%>" class="w-100 h-100"></canvas>
<script>
  var ctx = document.getElementById("myRadarChart_<%=rating.id%>");
  var myRadarChart = new Chart(ctx, {
/*グラフの種類*/
    type: "radar",
    data: {
      labels: [
/*各項目のラベル（上から時計回り）*/
        "<%= t('ratings.cool') %>",
        "<%= t('ratings.cute') %>",
        "<%= t('ratings.hot') %>",
        "<%= t('ratings.relax') %>",
        "<%= t('ratings.emotion') %>",
        "<%= t('ratings.funny') %>",
        "<%= t('ratings.complex') %>",
        "<%= t('ratings.brisk') %>"
      ],

      datasets: [
        {
/*グラフ全体のラベル*/
          label: "<%= t('defaults.average_rating') %>",
          backgroundColor: 'rgba(63,104,191,0.5)',
          borderColor: 'rgba(63,104,191,1)',
          borderWidth: 5,
          fill: true,
/*グラフで表示するデータ（上から時計回り）*/
          data: [
            <%= number_with_precision(book.ratings.average(:cool)).to_f %>,
            <%= number_with_precision(book.ratings.average(:cute)).to_f %>,
            <%= number_with_precision(book.ratings.average(:hot)).to_f %>,
            <%= number_with_precision(book.ratings.average(:relax)).to_f %>,
            <%= number_with_precision(book.ratings.average(:emotion)).to_f %>,
            <%= number_with_precision(book.ratings.average(:funny)).to_f %>,
            <%= number_with_precision(book.ratings.average(:complex)).to_f %>,
            <%= number_with_precision(book.ratings.average(:brisk)).to_f %>
          ]
        }
       ],
    },
/*オプションの設定*/
      options: {
        scales: {
          r: {
            min: 0,
            max: 5,
            maxTicksLimit: 5,
            beginAtZero: true,
            ticks: {
              stepSize: 1,
              font: {
                size: 16,
              },
            },
            grid: {
              color: '#000',
              lineWidth: 4,
            },
            angleLines: {
              color: "#000",
              lineWidth: 2,
            },
            pointLabels: {
              font: {
                size: 18,
              }
            }
          },
        },
      }
  });
</script>
<% end %>